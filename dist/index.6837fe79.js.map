{"mappings":"AACA,MAAMA,EAAIC,OAAOD,EACXE,UAAYF,EAAC,aACbG,MAAQD,UAAUE,KAAI,WACtBC,OAASL,EAAC,wBAGVM,WAAaC,aAAaC,QAAO,YACjCC,KAAOC,KAAKC,MAAML,YAClBM,QAAUH,MAAI,EACdI,KAAI,IAAOC,IAAG,uBAA0BC,MAAO,IAC/CF,KAAI,IAAOC,IAAG,2BAA8BC,MAAO,IAInDC,YAAeF,GACVA,EAAIG,QAAO,WAAW,IACxBA,QAAO,UAAU,IACjBA,QAAO,OAAO,IACdA,QAAO,OAAA,IAITC,OAAM,KACTC,QAAQC,IAAIR,SACZO,QAAQC,IAAIR,mBAAmBS,OAC/BT,QAAQU,MAAI,CAAEC,EAAIC,IAECA,EAAHT,MAAQQ,EAAIR,QAE5BI,QAAQC,IAAIR,SAEAV,UAAFE,KAAI,iBAAkBqB,SAEpBb,QAAJc,SAAO,CAAEC,EAAKC,KAClB,MAAMC,EAAM7B,EAAC,yFAGe2B,EAAKd,iDACLG,YAAYW,EAAKb,0PAQ1CgB,aAAa3B,OAChB0B,EAAIE,GAAE,SAAQ,KAEoBJ,EAAzBZ,OAAS,EACdd,OAAO+B,KAAKL,EAAKb,QAErBe,EAAIE,GAAE,QAAQ,UAAaE,IACvBA,EAAEC,kBACFtB,QAAQuB,OAAOP,EAAM,GACrBV,gBAIZA,SAGYlB,EAAX,cAAe+B,GAAE,SAAQ,KACtB,IAAIjB,EAAMb,OAAOmC,OAAM,cACI,IAAxBtB,EAAIuB,QAAO,UACVvB,EAAG,WAAgBA,GAEvBK,QAAQC,IAAIN,GACZF,QAAQ0B,KAAI,CAAEzB,KAAKG,YAAYF,GAAK,GAAGyB,cAAczB,IAAAA,EAAIC,MAAM,IAC/DI,QAAQC,IAAIR,SACZM,YAIUjB,OAAPuC,eAAc,KACjB,MAAOC,EAAa/B,KAAKgC,UAAU9B,SACnCL,aAAaoC,QAAO,WAAYF,IAIxBzC,EAAV4C,UAAUb,GAAE,YAAcE,IAExB,GAAG5B,OAAOwC,GAAE,UAAS,OAGrB,MAAKC,IAAEA,GAAOb,EACRc,GAAWnC,SAAO,IAAQR,MAAM4C,GAASA,EAAKnC,KAAK0B,gBAAkBO,IACxEC,IACCA,EAAOhC,OAAS,EAChBd,OAAO+B,KAAKe,EAAOjC","sources":["src/main.ts"],"sourcesContent":["// @ts-ignore\r\nconst $ = window.$;\r\nconst $siteList = $('.siteList');\r\nconst $last = $siteList.find('li.last');\r\nconst $input = $('.searchWrapper>input');\r\n\r\n// 数据初始化\r\nconst dataString = localStorage.getItem('nav-list');\r\nconst data = JSON.parse(dataString); // 站点列表\r\nconst hashMap = data || [\r\n    { logo: 'A', url: 'https://www.acfun.cn', count: 0 },\r\n    { logo: 'B', url: 'https://www.bilibili.com', count: 0 }\r\n];\r\n\r\n// logo生成\r\nconst simplefyUrl = (url) => {\r\n    return url.replace('https://', '')\r\n        .replace('http://', '')\r\n        .replace('www.', '')\r\n        .replace(/\\/.*/, '') // 删除 / 开头的内容\r\n}\r\n\r\n// 渲染\r\nconst  render = () => {\r\n    console.log(hashMap);\r\n    console.log(hashMap instanceof Array);\r\n    hashMap.sort((pre,next)=>{\r\n        // return pre.count - next.count; // 从小到大\r\n        return next.count - pre.count; // 浏览次数从大到小\r\n    })\r\n    console.log(hashMap);\r\n    // 删除所有站点\r\n    $siteList.find('li:not(.last)').remove();\r\n    // forEach可以改变node的值\r\n    hashMap.forEach((node,index) => {\r\n        const $li = $(`\r\n            <li>\r\n            <div class=\"site\">\r\n                <div class=\"logo\">${node.logo}</div>\r\n                <div class=\"link\">${simplefyUrl(node.url)}</div>\r\n                <div class=\"close\">\r\n                    <svg class=\"icon\">\r\n                        <use xlink:href=\"#icon-close\"></use>\r\n                    </svg>\r\n                </div>\r\n            </div>\r\n        </li>\r\n        `).insertBefore($last);\r\n        $li.on('click',()=>{\r\n            // 每点击一次，取出次数，排序一次\r\n            node.count += 1;\r\n            window.open(node.url);\r\n        });\r\n        $li.on('click', '.close', (e) => {\r\n            e.stopPropagation();\r\n            hashMap.splice(index,1);\r\n            render();\r\n        });\r\n    });\r\n}\r\nrender();\r\n\r\n// 新增站点时间\r\n$('.addButton').on('click',()=>{\r\n    let url = window.prompt(\"请输入你要添加的网址\");\r\n    if(url.indexOf('http') !== 0){\r\n        url = \"https://\" + url;\r\n    }\r\n    console.log(url);\r\n    hashMap.push({logo:simplefyUrl(url)[0].toUpperCase(),url,count:0});\r\n    console.log(hashMap);\r\n    render();\r\n});\r\n\r\n// 关闭页面的响应\r\nwindow.onbeforeunload = () =>{\r\n    const  dataString = JSON.stringify(hashMap);\r\n    localStorage.setItem('nav-list',dataString);\r\n}\r\n\r\n// 键盘响应事件\r\n$(document).on('keypress', (e) => {\r\n    // 如果此时焦点在输入框，不响应\r\n    if($input.is(\":focus\")){\r\n        return;\r\n    }\r\n    const {key} = e;\r\n    const target =  (hashMap || []).find((item) => item.logo.toUpperCase() === key);\r\n    if(target){\r\n        target.count += 1;\r\n        window.open(target.url);\r\n    }\r\n})\r\n"],"names":["$","window","$siteList","$last","find","$input","dataString","localStorage","getItem","data","JSON","parse","hashMap","logo","url","count","simplefyUrl","replace","render","console","log","Array","sort","pre","next","remove","forEach","node","index","$li","insertBefore","on","open","e","stopPropagation","splice","prompt","indexOf","push","toUpperCase","onbeforeunload","dataString1","stringify","setItem","document","is","key","target","item"],"version":3,"file":"index.6837fe79.js.map"}